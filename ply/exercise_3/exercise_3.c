
// Unmark the following line if you are using windows
//#include <windows.h>

#include <stdlib.h>
#include <stdio.h>

#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>

#include "glm.h"

// Declare common global variables
int g_nWidth = 640;
int g_nHeight = 480;
GLfloat* g_pfPixels = NULL;

// Declare model-related global variables
// Modification of the famouse "CornellBox" scene
GLMmodel* g_psModel = NULL;

// The teapot object modeled with 32 bi-cubic Bezier surfaces
// Eevery four lines are the coordinates (x, y, z) of sixteen vertices of a bi-cubic Bezier surface
// The vertex order is P_{uv}:
//					   P_{00}, P_{10}, P_{20}, P_{30}, 
//					   P_{01}, P_{11}, P_{21}, P_{31},
//					   P_{02}, P_{12}, P_{22}, P_{32},
//					   P_{03}, P_{13}, P_{23}, P_{33},
// where the first sub-script is u coordinate and the second one is v coordinate.
GLfloat g_afTeapot[][16][3] = {
								{  9.737500, 20.750000,  6.400000 }, { 10.521500, 20.750000,  6.400000 }, { 11.137500, 20.750000,  5.784000 }, { 11.137500, 20.750000,  5.000000 },
								{  9.737500, 20.881250,  6.337500 }, { 10.486500, 20.881250,  6.337500 }, { 11.075000, 20.881250,  5.749000 }, { 11.075000, 20.881250,  5.000000 },
								{  9.737500, 20.881250,  6.437500 }, { 10.542500, 20.881250,  6.437500 }, { 11.175000, 20.881250,  5.805000 }, { 11.175000, 20.881250,  5.000000 },
								{  9.737500, 20.750000,  6.500000 }, { 10.577500, 20.750000,  6.500000 }, { 11.237500, 20.750000,  5.840000 }, { 11.237500, 20.750000,  5.000000 },

								{  8.337500, 20.750000,  5.000000 }, {  8.337500, 20.750000,  5.784000 }, {  8.953500, 20.750000,  6.400000 }, {  9.737500, 20.750000,  6.400000 },
								{  8.400000, 20.881250,  5.000000 }, {  8.400000, 20.881250,  5.749000 }, {  8.988500, 20.881250,  6.337500 }, {  9.737500, 20.881250,  6.337500 },
								{  8.300000, 20.881250,  5.000000 }, {  8.300000, 20.881250,  5.805000 }, {  8.932500, 20.881250,  6.437500 }, {  9.737500, 20.881250,  6.437500 },
								{  8.237500, 20.750000,  5.000000 }, {  8.237500, 20.750000,  5.840000 }, {  8.897500, 20.750000,  6.500000 }, {  9.737500, 20.750000,  6.500000 },

								{  9.737500, 20.750000,  3.600000 }, {  8.953500, 20.750000,  3.600000 }, {  8.337500, 20.750000,  4.216000 }, {  8.337500, 20.750000,  5.000000 },
								{  9.737500, 20.881250,  3.662500 }, {  8.988500, 20.881250,  3.662500 }, {  8.400000, 20.881250,  4.251000 }, {  8.400000, 20.881250,  5.000000 },
								{  9.737500, 20.881250,  3.562500 }, {  8.932500, 20.881250,  3.562500 }, {  8.300000, 20.881250,  4.195000 }, {  8.300000, 20.881250,  5.000000 },
								{  9.737500, 20.750000,  3.500000 }, {  8.897500, 20.750000,  3.500000 }, {  8.237500, 20.750000,  4.160000 }, {  8.237500, 20.750000,  5.000000 },

								{ 11.137500, 20.750000,  5.000000 }, { 11.137500, 20.750000,  4.216000 }, { 10.521500, 20.750000,  3.600000 }, {  9.737500, 20.750000,  3.600000 },
								{ 11.075000, 20.881250,  5.000000 }, { 11.075000, 20.881250,  4.251000 }, { 10.486500, 20.881250,  3.662500 }, {  9.737500, 20.881250,  3.662500 },
								{ 11.175000, 20.881250,  5.000000 }, { 11.175000, 20.881250,  4.195000 }, { 10.542500, 20.881250,  3.562500 }, {  9.737500, 20.881250,  3.562500 },
								{ 11.237500, 20.750000,  5.000000 }, { 11.237500, 20.750000,  4.160000 }, { 10.577500, 20.750000,  3.500000 }, {  9.737500, 20.750000,  3.500000 },

								{  9.737500, 20.750000,  6.500000 }, { 10.577500, 20.750000,  6.500000 }, { 11.237500, 20.750000,  5.840000 }, { 11.237500, 20.750000,  5.000000 },
								{  9.737500, 20.225000,  6.750000 }, { 10.717500, 20.225000,  6.750000 }, { 11.487500, 20.225000,  5.980000 }, { 11.487500, 20.225000,  5.000000 },
								{  9.737500, 19.700000,  7.000000 }, { 10.857500, 19.700000,  7.000000 }, { 11.737500, 19.700000,  6.120000 }, { 11.737500, 19.700000,  5.000000 },
								{  9.737500, 19.250000,  7.000000 }, { 10.857500, 19.250000,  7.000000 }, { 11.737500, 19.250000,  6.120000 }, { 11.737500, 19.250000,  5.000000 },

								{  8.237500, 20.750000,  5.000000 }, {  8.237500, 20.750000,  5.840000 }, {  8.897500, 20.750000,  6.500000 }, {  9.737500, 20.750000,  6.500000 },
								{  7.987500, 20.225000,  5.000000 }, {  7.987500, 20.225000,  5.980000 }, {  8.757500, 20.225000,  6.750000 }, {  9.737500, 20.225000,  6.750000 },
								{  7.737500, 19.700000,  5.000000 }, {  7.737500, 19.700000,  6.120000 }, {  8.617500, 19.700000,  7.000000 }, {  9.737500, 19.700000,  7.000000 },
								{  7.737500, 19.250000,  5.000000 }, {  7.737500, 19.250000,  6.120000 }, {  8.617500, 19.250000,  7.000000 }, {  9.737500, 19.250000,  7.000000 },

								{  9.737500, 20.750000,  3.500000 }, {  8.897500, 20.750000,  3.500000 }, {  8.237500, 20.750000,  4.160000 }, {  8.237500, 20.750000,  5.000000 },
								{  9.737500, 20.225000,  3.250000 }, {  8.757500, 20.225000,  3.250000 }, {  7.987500, 20.225000,  4.020000 }, {  7.987500, 20.225000,  5.000000 },
								{  9.737500, 19.700000,  3.000000 }, {  8.617500, 19.700000,  3.000000 }, {  7.737500, 19.700000,  3.880000 }, {  7.737500, 19.700000,  5.000000 },
								{  9.737500, 19.250000,  3.000000 }, {  8.617500, 19.250000,  3.000000 }, {  7.737500, 19.250000,  3.880000 }, {  7.737500, 19.250000,  5.000000 },

								{ 11.237500, 20.750000,  5.000000 }, { 11.237500, 20.750000,  4.160000 }, { 10.577500, 20.750000,  3.500000 }, {  9.737500, 20.750000,  3.500000 },
								{ 11.487500, 20.225000,  5.000000 }, { 11.487500, 20.225000,  4.020000 }, { 10.717500, 20.225000,  3.250000 }, {  9.737500, 20.225000,  3.250000 },
								{ 11.737500, 19.700000,  5.000000 }, { 11.737500, 19.700000,  3.880000 }, { 10.857500, 19.700000,  3.000000 }, {  9.737500, 19.700000,  3.000000 },
								{ 11.737500, 19.250000,  5.000000 }, { 11.737500, 19.250000,  3.880000 }, { 10.857500, 19.250000,  3.000000 }, {  9.737500, 19.250000,  3.000000 },

								{  9.737500, 19.250000,  7.000000 }, { 10.857500, 19.250000,  7.000000 }, { 11.737500, 19.250000,  6.120000 }, { 11.737500, 19.250000,  5.000000 },
								{  9.737500, 18.800000,  7.000000 }, { 10.857500, 18.800000,  7.000000 }, { 11.737500, 18.800000,  6.120000 }, { 11.737500, 18.800000,  5.000000 },
								{  9.737500, 18.575000,  6.500000 }, { 10.577500, 18.575000,  6.500000 }, { 11.237500, 18.575000,  5.840000 }, { 11.237500, 18.575000,  5.000000 },
								{  9.737500, 18.500000,  6.500000 }, { 10.577500, 18.500000,  6.500000 }, { 11.237500, 18.500000,  5.840000 }, { 11.237500, 18.500000,  5.000000 },

								{  7.737500, 19.250000,  5.000000 }, {  7.737500, 19.250000,  6.120000 }, {  8.617500, 19.250000,  7.000000 }, {  9.737500, 19.250000,  7.000000 },
								{  7.737500, 18.800000,  5.000000 }, {  7.737500, 18.800000,  6.120000 }, {  8.617500, 18.800000,  7.000000 }, {  9.737500, 18.800000,  7.000000 },
								{  8.237500, 18.575000,  5.000000 }, {  8.237500, 18.575000,  5.840000 }, {  8.897500, 18.575000,  6.500000 }, {  9.737500, 18.575000,  6.500000 },
								{  8.237500, 18.500000,  5.000000 }, {  8.237500, 18.500000,  5.840000 }, {  8.897500, 18.500000,  6.500000 }, {  9.737500, 18.500000,  6.500000 },

								{  9.737500, 19.250000,  3.000000 }, {  8.617500, 19.250000,  3.000000 }, {  7.737500, 19.250000,  3.880000 }, {  7.737500, 19.250000,  5.000000 },
								{  9.737500, 18.800000,  3.000000 }, {  8.617500, 18.800000,  3.000000 }, {  7.737500, 18.800000,  3.880000 }, {  7.737500, 18.800000,  5.000000 },
								{  9.737500, 18.575000,  3.500000 }, {  8.897500, 18.575000,  3.500000 }, {  8.237500, 18.575000,  4.160000 }, {  8.237500, 18.575000,  5.000000 },
								{  9.737500, 18.500000,  3.500000 }, {  8.897500, 18.500000,  3.500000 }, {  8.237500, 18.500000,  4.160000 }, {  8.237500, 18.500000,  5.000000 },

								{ 11.737500, 19.250000,  5.000000 }, { 11.737500, 19.250000,  3.880000 }, { 10.857500, 19.250000,  3.000000 }, {  9.737500, 19.250000,  3.000000 },
								{ 11.737500, 18.800000,  5.000000 }, { 11.737500, 18.800000,  3.880000 }, { 10.857500, 18.800000,  3.000000 }, {  9.737500, 18.800000,  3.000000 },
								{ 11.237500, 18.575000,  5.000000 }, { 11.237500, 18.575000,  4.160000 }, { 10.577500, 18.575000,  3.500000 }, {  9.737500, 18.575000,  3.500000 },
								{ 11.237500, 18.500000,  5.000000 }, { 11.237500, 18.500000,  4.160000 }, { 10.577500, 18.500000,  3.500000 }, {  9.737500, 18.500000,  3.500000 },

								{  8.237500, 20.600000,  5.000000 }, {  8.237500, 20.600000,  5.300000 }, {  8.137500, 20.375000,  5.300000 }, {  8.137500, 20.375000,  5.000000 },
								{  7.237500, 20.600000,  5.000000 }, {  7.237500, 20.600000,  5.300000 }, {  7.437500, 20.375000,  5.300000 }, {  7.437500, 20.375000,  5.000000 },
								{  6.737500, 20.600000,  5.000000 }, {  6.737500, 20.600000,  5.300000 }, {  7.037500, 20.375000,  5.300000 }, {  7.037500, 20.375000,  5.000000 },
								{  6.737500, 20.150000,  5.000000 }, {  6.737500, 20.150000,  5.300000 }, {  7.037500, 20.150000,  5.300000 }, {  7.037500, 20.150000,  5.000000 },

								{  8.137500, 20.375000,  5.000000 }, {  8.137500, 20.375000,  4.700000 }, {  8.237500, 20.600000,  4.700000 }, {  8.237500, 20.600000,  5.000000 },
								{  7.437500, 20.375000,  5.000000 }, {  7.437500, 20.375000,  4.700000 }, {  7.237500, 20.600000,  4.700000 }, {  7.237500, 20.600000,  5.000000 },
								{  7.037500, 20.375000,  5.000000 }, {  7.037500, 20.375000,  4.700000 }, {  6.737500, 20.600000,  4.700000 }, {  6.737500, 20.600000,  5.000000 },
								{  7.037500, 20.150000,  5.000000 }, {  7.037500, 20.150000,  4.700000 }, {  6.737500, 20.150000,  4.700000 }, {  6.737500, 20.150000,  5.000000 },

								{  6.737500, 20.150000,  5.000000 }, {  6.737500, 20.150000,  5.300000 }, {  7.037500, 20.150000,  5.300000 }, {  7.037500, 20.150000,  5.000000 },
								{  6.737500, 19.700000,  5.000000 }, {  6.737500, 19.700000,  5.300000 }, {  7.037500, 19.925000,  5.300000 }, {  7.037500, 19.925000,  5.000000 },
								{  7.087500, 19.287500,  5.000000 }, {  7.087500, 19.287500,  5.300000 }, {  7.237500, 19.475000,  5.300000 }, {  7.237500, 19.475000,  5.000000 },
								{  7.837500, 18.950000,  5.000000 }, {  7.837500, 18.950000,  5.300000 }, {  7.737500, 19.250000,  5.300000 }, {  7.737500, 19.250000,  5.000000 },

								{  7.037500, 20.150000,  5.000000 }, {  7.037500, 20.150000,  4.700000 }, {  6.737500, 20.150000,  4.700000 }, {  6.737500, 20.150000,  5.000000 },
								{  7.037500, 19.925000,  5.000000 }, {  7.037500, 19.925000,  4.700000 }, {  6.737500, 19.700000,  4.700000 }, {  6.737500, 19.700000,  5.000000 },
								{  7.237500, 19.475000,  5.000000 }, {  7.237500, 19.475000,  4.700000 }, {  7.087500, 19.287500,  4.700000 }, {  7.087500, 19.287500,  5.000000 },
								{  7.737500, 19.250000,  5.000000 }, {  7.737500, 19.250000,  4.700000 }, {  7.837500, 18.950000,  4.700000 }, {  7.837500, 18.950000,  5.000000 },

								{ 11.437500, 18.950000,  5.000000 }, { 11.437500, 18.950000,  5.660000 }, { 11.437500, 19.775000,  5.660000 }, { 11.437500, 19.775000,  5.000000 },
								{ 12.837500, 19.175000,  5.000000 }, { 12.837500, 19.175000,  5.660000 }, { 12.337500, 19.775000,  5.660000 }, { 12.337500, 19.775000,  5.000000 },
								{ 12.137500, 20.375000,  5.000000 }, { 12.137500, 20.375000,  5.250000 }, { 12.037500, 20.450000,  5.250000 }, { 12.037500, 20.450000,  5.000000 },
								{ 13.037500, 20.750000,  5.000000 }, { 13.037500, 20.750000,  5.250000 }, { 12.437500, 20.750000,  5.250000 }, { 12.437500, 20.750000,  5.000000 },

								{ 11.437500, 19.775000,  5.000000 }, { 11.437500, 19.775000,  4.340000 }, { 11.437500, 18.950000,  4.340000 }, { 11.437500, 18.950000,  5.000000 },
								{ 12.337500, 19.775000,  5.000000 }, { 12.337500, 19.775000,  4.340000 }, { 12.837500, 19.175000,  4.340000 }, { 12.837500, 19.175000,  5.000000 },
								{ 12.037500, 20.450000,  5.000000 }, { 12.037500, 20.450000,  4.750000 }, { 12.137500, 20.375000,  4.750000 }, { 12.137500, 20.375000,  5.000000 },
								{ 12.437500, 20.750000,  5.000000 }, { 12.437500, 20.750000,  4.750000 }, { 13.037500, 20.750000,  4.750000 }, { 13.037500, 20.750000,  5.000000 },

								{ 13.037500, 20.750000,  5.000000 }, { 13.037500, 20.750000,  5.250000 }, { 12.437500, 20.750000,  5.250000 }, { 12.437500, 20.750000,  5.000000 },
								{ 13.262500, 20.843750,  5.000000 }, { 13.262500, 20.843750,  5.250000 }, { 12.537500, 20.825000,  5.250000 }, { 12.537500, 20.825000,  5.000000 },
								{ 13.187500, 20.862500,  5.000000 }, { 13.187500, 20.862500,  5.150000 }, { 12.637500, 20.825000,  5.150000 }, { 12.637500, 20.825000,  5.000000 },
								{ 12.937500, 20.750000,  5.000000 }, { 12.937500, 20.750000,  5.150000 }, { 12.537500, 20.750000,  5.150000 }, { 12.537500, 20.750000,  5.000000 },

								{ 12.437500, 20.750000,  5.000000 }, { 12.437500, 20.750000,  4.750000 }, { 13.037500, 20.750000,  4.750000 }, { 13.037500, 20.750000,  5.000000 },
								{ 12.537500, 20.825000,  5.000000 }, { 12.537500, 20.825000,  4.750000 }, { 13.262500, 20.843750,  4.750000 }, { 13.262500, 20.843750,  5.000000 },
								{ 12.637500, 20.825000,  5.000000 }, { 12.637500, 20.825000,  4.850000 }, { 13.187500, 20.862500,  4.850000 }, { 13.187500, 20.862500,  5.000000 },
								{ 12.537500, 20.750000,  5.000000 }, { 12.537500, 20.750000,  4.850000 }, { 12.937500, 20.750000,  4.850000 }, { 12.937500, 20.750000,  5.000000 },

								{  9.737500, 21.500000,  5.000800 }, {  9.737950, 21.500000,  5.000800 }, {  9.738300, 21.500000,  5.000450 }, {  9.738300, 21.500000,  5.000000 },
								{  9.737500, 21.500000,  5.800000 }, { 10.187500, 21.500000,  5.800000 }, { 10.537500, 21.500000,  5.450000 }, { 10.537500, 21.500000,  5.000000 },
								{  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 },
								{  9.737500, 21.050000,  5.200000 }, {  9.849500, 21.050000,  5.200000 }, {  9.937500, 21.050000,  5.112000 }, {  9.937500, 21.050000,  5.000000 },

								{  9.736700, 21.500000,  5.000000 }, {  9.736700, 21.500000,  5.000450 }, {  9.737050, 21.500000,  5.000800 }, {  9.737500, 21.500000,  5.000800 },
								{  8.937500, 21.500000,  5.000000 }, {  8.937500, 21.500000,  5.450000 }, {  9.287500, 21.500000,  5.800000 }, {  9.737500, 21.500000,  5.800000 },
								{  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 },
								{  9.537500, 21.050000,  5.000000 }, {  9.537500, 21.050000,  5.112000 }, {  9.625500, 21.050000,  5.200000 }, {  9.737500, 21.050000,  5.200000 },

								{  9.737500, 21.500000,  4.999200 }, {  9.737050, 21.500000,  4.999200 }, {  9.736700, 21.500000,  4.999550 }, {  9.736700, 21.500000,  5.000000 },
								{  9.737500, 21.500000,  4.200000 }, {  9.287500, 21.500000,  4.200000 }, {  8.937500, 21.500000,  4.550000 }, {  8.937500, 21.500000,  5.000000 },
								{  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 },
								{  9.737500, 21.050000,  4.800000 }, {  9.625500, 21.050000,  4.800000 }, {  9.537500, 21.050000,  4.888000 }, {  9.537500, 21.050000,  5.000000 },

								{  9.738300, 21.500000,  5.000000 }, {  9.738300, 21.500000,  4.999550 }, {  9.737950, 21.500000,  4.999200 }, {  9.737500, 21.500000,  4.999200 },
								{ 10.537500, 21.500000,  5.000000 }, { 10.537500, 21.500000,  4.550000 }, { 10.187500, 21.500000,  4.200000 }, {  9.737500, 21.500000,  4.200000 },
								{  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 }, {  9.737500, 21.200000,  5.000000 },
								{  9.937500, 21.050000,  5.000000 }, {  9.937500, 21.050000,  4.888000 }, {  9.849500, 21.050000,  4.800000 }, {  9.737500, 21.050000,  4.800000 },

								{  9.737500, 21.050000,  5.200000 }, {  9.849500, 21.050000,  5.200000 }, {  9.937500, 21.050000,  5.112000 }, {  9.937500, 21.050000,  5.000000 },
								{  9.737500, 20.900000,  5.400000 }, {  9.961500, 20.900000,  5.400000 }, { 10.137500, 20.900000,  5.224000 }, { 10.137500, 20.900000,  5.000000 },
								{  9.737500, 20.900000,  6.300000 }, { 10.465500, 20.900000,  6.300000 }, { 11.037500, 20.900000,  5.728000 }, { 11.037500, 20.900000,  5.000000 },
								{  9.737500, 20.750000,  6.300000 }, { 10.465500, 20.750000,  6.300000 }, { 11.037500, 20.750000,  5.728000 }, { 11.037500, 20.750000,  5.000000 },

								{  9.537500, 21.050000,  5.000000 }, {  9.537500, 21.050000,  5.112000 }, {  9.625500, 21.050000,  5.200000 }, {  9.737500, 21.050000,  5.200000 },
								{  9.337500, 20.900000,  5.000000 }, {  9.337500, 20.900000,  5.224000 }, {  9.513500, 20.900000,  5.400000 }, {  9.737500, 20.900000,  5.400000 },
								{  8.437500, 20.900000,  5.000000 }, {  8.437500, 20.900000,  5.728000 }, {  9.009500, 20.900000,  6.300000 }, {  9.737500, 20.900000,  6.300000 },
								{  8.437500, 20.750000,  5.000000 }, {  8.437500, 20.750000,  5.728000 }, {  9.009500, 20.750000,  6.300000 }, {  9.737500, 20.750000,  6.300000 },

								{  9.737500, 21.050000,  4.800000 }, {  9.625500, 21.050000,  4.800000 }, {  9.537500, 21.050000,  4.888000 }, {  9.537500, 21.050000,  5.000000 },
								{  9.737500, 20.900000,  4.600000 }, {  9.513500, 20.900000,  4.600000 }, {  9.337500, 20.900000,  4.776000 }, {  9.337500, 20.900000,  5.000000 },
								{  9.737500, 20.900000,  3.700000 }, {  9.009500, 20.900000,  3.700000 }, {  8.437500, 20.900000,  4.272000 }, {  8.437500, 20.900000,  5.000000 },
								{  9.737500, 20.750000,  3.700000 }, {  9.009500, 20.750000,  3.700000 }, {  8.437500, 20.750000,  4.272000 }, {  8.437500, 20.750000,  5.000000 },

								{  9.937500, 21.050000,  5.000000 }, {  9.937500, 21.050000,  4.888000 }, {  9.849500, 21.050000,  4.800000 }, {  9.737500, 21.050000,  4.800000 },
								{ 10.137500, 20.900000,  5.000000 }, { 10.137500, 20.900000,  4.776000 }, {  9.961500, 20.900000,  4.600000 }, {  9.737500, 20.900000,  4.600000 },
								{ 11.037500, 20.900000,  5.000000 }, { 11.037500, 20.900000,  4.272000 }, { 10.465500, 20.900000,  3.700000 }, {  9.737500, 20.900000,  3.700000 },
								{ 11.037500, 20.750000,  5.000000 }, { 11.037500, 20.750000,  4.272000 }, { 10.465500, 20.750000,  3.700000 }, {  9.737500, 20.750000,  3.700000 },

								{  9.737500, 18.500000,  6.500000 }, { 10.577500, 18.500000,  6.500000 }, { 11.237500, 18.500000,  5.840000 }, { 11.237500, 18.500000,  5.000000 },
								{  9.737500, 18.500000,  6.300000 }, { 10.465500, 18.500000,  6.300000 }, { 11.037500, 18.500000,  5.728000 }, { 11.037500, 18.500000,  5.000000 },
								{  9.737500, 18.500000,  5.400000 }, {  9.961500, 18.500000,  5.400000 }, { 10.137500, 18.500000,  5.224000 }, { 10.137500, 18.500000,  5.000000 },
								{  9.737500, 18.500000,  4.999200 }, {  9.737950, 18.500000,  5.000800 }, {  9.738300, 18.500000,  5.000450 }, {  9.738300, 18.500000,  5.000000 },

								{  8.237500, 18.500000,  5.000000 }, {  8.237500, 18.500000,  5.840000 }, {  8.897500, 18.500000,  6.500000 }, {  9.737500, 18.500000,  6.500000 },
								{  8.437500, 18.500000,  5.000000 }, {  8.437500, 18.500000,  5.728000 }, {  9.009500, 18.500000,  6.300000 }, {  9.737500, 18.500000,  6.300000 },
								{  9.337500, 18.500000,  5.000000 }, {  9.337500, 18.500000,  5.224000 }, {  9.513500, 18.500000,  5.400000 }, {  9.737500, 18.500000,  5.400000 },
								{  9.736700, 18.500000,  5.000000 }, {  9.736700, 18.500000,  5.000450 }, {  9.737050, 18.500000,  5.000800 }, {  9.737500, 18.500000,  5.000800 },

								{  9.737500, 18.500000,  3.500000 }, {  8.897500, 18.500000,  3.500000 }, {  8.237500, 18.500000,  4.160000 }, {  8.237500, 18.500000,  5.000000 },
								{  9.737500, 18.500000,  5.000000 }, {  9.737500, 18.500000,  5.000000 }, {  9.737500, 18.500000,  5.000000 }, {  9.737500, 18.500000,  5.000000 },
								{  9.737500, 18.500000,  4.200000 }, {  9.287500, 18.500000,  4.200000 }, {  8.937500, 18.500000,  4.550000 }, {  8.937500, 18.500000,  5.000000 },
								{  9.737500, 18.500000,  4.999200 }, {  9.737050, 18.500000,  4.999200 }, {  9.736700, 18.500000,  4.999550 }, {  9.736700, 18.500000,  5.000000 },

								{ 11.237500, 18.500000,  5.000000 }, { 11.237500, 18.500000,  4.160000 }, { 10.577500, 18.500000,  3.500000 }, {  9.737500, 18.500000,  3.500000 },
								{  9.737500, 18.500000,  5.000000 }, {  9.737500, 18.500000,  5.000000 }, {  9.737500, 18.500000,  5.000000 }, {  9.737500, 18.500000,  5.000000 },
								{ 10.537500, 18.500000,  5.000000 }, { 10.537500, 18.500000,  4.550000 }, { 10.187500, 18.500000,  4.200000 }, {  9.737500, 18.500000,  4.200000 },
								{  9.738300, 18.500000,  5.000000 }, {  9.738300, 18.500000,  4.999550 }, {  9.737950, 18.500000,  4.999200 }, {  9.737500, 18.500000,  4.999200 },
							  };


// Declare light-related global variables
GLfloat g_afLightPos[][3]	= { { 0.0, 30.0, 10.0 }, { 20.0, 35.0, -10.0 } };
GLfloat g_afLightColor[][4] = { { 0.5, 0.5, 0.5, 1.0 }, { 0.5, 0.5, 0.5, 1.0 } };

// Declare camera-related global variables
GLfloat g_fCameraFOV	= 34.516;
GLfloat g_fCameraNear	= 10;
GLfloat g_fCameraFar	= 120;
GLfloat g_afCameraPos[]	= { 0.0, 20.0, 80.0 };
GLfloat g_afCameraDir[] = { 0.0, 0.0, -1.0 };
GLfloat g_afCameraUp[]	= { 0.0, 1.0, 0.0 };


// Initialization function
void MyInit( void )
{
	// Initialize the rendered image buffer
	g_pfPixels = malloc( g_nHeight * g_nWidth * 3 * sizeof(GLfloat) );
	memset( g_pfPixels, 0, g_nHeight * g_nWidth * 3 * sizeof(GLfloat) );

	// Disable memory alignment
	glPixelStorei( GL_UNPACK_ALIGNMENT, 1 );
}

// Memory de-allocation function
void MyFreeMemory()
{
	glmDelete( g_psModel );
	free( g_pfPixels );

	////////////////////////////////////////////////////////////////
	// Add your de-allocation code of global variables here

	////////////////////////////////////////////////////////////////
}

// Ray tracing function (you may need to add function arguments)
void MyRayTrace()
{
	////////////////////////////////////////////////////////////////
	// Add your ray tracing code here

	////////////////////////////////////////////////////////////////
}

// Display routine
void MyDisplay( void )
{
	// Clear buffers
    glClear( GL_COLOR_BUFFER_BIT );

	// Draw rendered image from ray tracing
	glDrawPixels( g_nWidth, g_nHeight, GL_RGB, GL_FLOAT, g_pfPixels );
	glFlush();
	glutSwapBuffers();
}

// Reshape routine
void MyReshape( int nWidth, int nHeight )
{
	// Set viewport transformation
	glViewport( 0, 0, nWidth, nHeight );

	// Set projection transformation
	glMatrixMode( GL_PROJECTION );
	glLoadIdentity();
	glOrtho( 0, 1, 0, 1, -1, 1 );

	// Set modelview transformation
	glMatrixMode( GL_MODELVIEW );
	glLoadIdentity();
}

// Keyboard control routine
void MyKeyboard( unsigned char ucKey, int nX, int nY )
{
	////////////////////////////////////////////////////////////////
	// Add your keyboard control code here
	switch( ucKey )
	{
	case 's': // Start ray tracing
		MyRayTrace();
		glutPostRedisplay();
		break;

	case 27: // Esc key
		MyFreeMemory();
		exit( 0 );
	}

	////////////////////////////////////////////////////////////////
}

// Main entry function
int main( int nArgc, char** pcArgv )
{
	// Initialize GLUT
	glutInit( &nArgc, pcArgv );

	// Initialize buffers
	glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGB );

	// Create display window
	glutInitWindowSize( 640, 480 );
	glutCreateWindow( "Exercise 3" );

	// Check command-line input arguments
	if( nArgc < 1 )
	{
	    fprintf( stderr, "Please specify an input OBJ model.\n" );
		exit( 1 );
	}
	
	if( !pcArgv[1] )
	{
	    fprintf( stderr, "Please specify an input OBJ model.\n" );
		exit( 1 );
	}

	// Read in the input model
	g_psModel = glmReadOBJ( pcArgv[1] );

	////////////////////////////////////////////////////////////////
	// Add your pre-processing code here

	////////////////////////////////////////////////////////////////

	// Program-specific initialization
	MyInit();

	// Set event routines
	glutReshapeFunc( MyReshape );
	glutDisplayFunc( MyDisplay );
	glutKeyboardFunc( MyKeyboard );

	// Start event parsing loop
	glutMainLoop();

    return 0;
}

